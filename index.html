<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador de Tiendas</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons (para el 칤cono del bot칩n flotante y coraz칩n) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
        }
        /* Estilo para el bot칩n flotante */
        #addButton {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 50;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease-in-out;
        }
        #addButton:hover {
            transform: scale(1.05);
        }
        /* Estilos del Modal */
        .modal {
            transition: opacity 0.3s ease-in-out;
        }
        .modal.hidden {
            opacity: 0;
            pointer-events: none;
        }
        /* Estilo para la tarjeta de tienda */
        .store-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .store-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <!-- Contenedor Principal -->
    <div class="max-w-4xl mx-auto p-4 md:p-8">
        <h1 class="text-4xl font-extrabold text-gray-900 mb-6 text-center">
            Buscador de Tiendas 游댍
        </h1>
        <p class="text-sm text-gray-500 mb-8 text-center">
            Muestra tiendas de Gamarra, filtradas por galer칤a y ordenadas por likes.
            <span id="userIdDisplay" class="block mt-2 text-xs text-blue-600"></span>
        </p>

        <!-- Filtros y B칰squeda -->
        <div class="flex flex-col sm:flex-row gap-4 mb-8">
            <input type="text" id="searchInput" placeholder="Buscar por nombre o descripci칩n..."
                   class="flex-grow p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150">
            <select id="galleryFilter"
                    class="p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 sm:w-1/3">
                <option value="all">Todas las galer칤as</option>
            </select>
        </div>

        <!-- Contenedor de Tiendas -->
        <div id="storesContainer" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <p id="loadingMessage" class="text-center text-gray-500 col-span-full">Cargando tiendas...</p>
        </div>
    </div>

    <!-- Bot칩n Flotante para Agregar Tienda -->
    <button id="addButton" onclick="showModal()"
            class="w-14 h-14 rounded-full bg-blue-600 text-white flex items-center justify-center text-2xl font-bold hover:bg-blue-700 transition duration-150">
        <i data-lucide="plus" class="w-6 h-6"></i>
    </button>

    <!-- MODAL para Agregar Tienda -->
    <div id="addStoreModal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-y-auto max-h-[90vh]">
            <!-- Encabezado del Modal -->
            <div class="p-6 border-b border-gray-200 flex justify-between items-center">
                <h2 class="text-xl font-bold text-gray-800">Registrar Nueva Tienda</h2>
                <button onclick="hideModal()" class="text-gray-400 hover:text-gray-600 transition">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Formulario -->
            <form id="storeForm" class="p-6 space-y-4">
                <div>
                    <label for="storeName" class="block text-sm font-medium text-gray-700">Nombre de la Tienda (ID)</label>
                    <input type="text" id="storeName" required placeholder="Ej: Moda Joven S.A.C."
                           class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="gallery" class="block text-sm font-medium text-gray-700">Galer칤a</label>
                        <input type="text" id="gallery" required placeholder="Ej: La Rotonda"
                               class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                        <label for="floor" class="block text-sm font-medium text-gray-700">Piso</label>
                        <input type="text" id="floor" required placeholder="Ej: 3"
                               class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="stand" class="block text-sm font-medium text-gray-700">Stand/N칰mero</label>
                        <input type="text" id="stand" required placeholder="Ej: 305"
                               class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                        <label for="tiktok" class="block text-sm font-medium text-gray-700">Enlace de TikTok</label>
                        <input type="url" id="tiktok" placeholder="https://tiktok.com/@mitienda"
                               class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>

                <div>
                    <label for="description" class="block text-sm font-medium text-gray-700">Descripci칩n Libre</label>
                    <textarea id="description" rows="3" required placeholder="Breve descripci칩n del tipo de producto o especialidad."
                              class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"></textarea>
                </div>

                <!-- Mensaje de Error (oculto por defecto) -->
                <div id="formMessage" class="hidden p-3 text-sm rounded-lg bg-red-100 text-red-700" role="alert"></div>

                <!-- Bot칩n de Env칤o -->
                <button type="submit" id="saveButton"
                        class="w-full py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-150">
                    Guardar Tienda
                </button>
            </form>
        </div>
    </div>

    <!-- Scripts de Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, collection, query, updateDoc, increment, getDoc, deleteDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Establecer nivel de log a Debug para ver actividad de Firestore
        setLogLevel('Debug');

        // Variables Globales
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db;
        let auth;
        let currentUserId = null;
        let isAuthReady = false;
        
        // Referencias del DOM
        const storesContainer = document.getElementById('storesContainer');
        const galleryFilter = document.getElementById('galleryFilter');
        const searchInput = document.getElementById('searchInput');
        const loadingMessage = document.getElementById('loadingMessage');
        const userIdDisplay = document.getElementById('userIdDisplay');
        const formMessage = document.getElementById('formMessage');
        const storeForm = document.getElementById('storeForm');

        // Estado local para los likes del usuario
        let userLikes = new Set();
        
        // =================================================================
        // 1. INICIALIZACI칍N Y AUTENTICACI칍N
        // =================================================================

        if (Object.keys(firebaseConfig).length > 0) {
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
            } catch (error) {
                console.error("Error al inicializar Firebase:", error);
                loadingMessage.textContent = "Error al conectar con la base de datos.";
            }
        } else {
             loadingMessage.textContent = "Configuraci칩n de Firebase no disponible.";
             console.error("Configuraci칩n de Firebase no disponible.");
        }

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                currentUserId = user.uid;
                userIdDisplay.textContent = `Tu ID de usuario (necesario para likes): ${currentUserId}`;
            } else {
                // Si no hay token inicial, usa sign-in an칩nimo
                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                    // Una vez autenticado, currentUserId se actualizar치 con el siguiente onAuthStateChanged
                } catch (error) {
                    console.error("Error al autenticar:", error);
                    loadingMessage.textContent = "Error de autenticaci칩n. Verifica las reglas de seguridad.";
                }
            }
            isAuthReady = true;
            if (db) {
                // Ejecutar la siembra de datos de prueba (se ejecuta solo una vez)
                await seedDatabase(); 
                setupRealtimeListeners();
            }
        });

        // =================================================================
        // 2. L칍GICA DE FIRESTORE (LECTURA y ESCRITURA)
        // =================================================================

        // Define la ruta de la colecci칩n de tiendas
        function getStoresCollectionRef() {
            // Ruta para datos p칰blicos: /artifacts/{appId}/public/data/tiendas
            return collection(db, `artifacts/${appId}/public/data/tiendas`);
        }
        
        // Define la ruta de la colecci칩n de likes del usuario actual
        function getLikesCollectionRef() {
            if (!currentUserId) return null;
            // Ruta privada del usuario: /artifacts/{appId}/users/{userId}/likes
            return collection(db, `artifacts/${appId}/users/${currentUserId}/likes`);
        }

        // --- SIEMBRA DE DATOS DE PRUEBA ---
        async function seedDatabase() {
            const storesColRef = getStoresCollectionRef();
            const checkDocRef = doc(storesColRef, "ModaTrendy"); // Usar una tienda como marcador

            try {
                // Verificar si ya existe la tienda "ModaTrendy" para evitar duplicaci칩n
                const checkDoc = await getDoc(checkDocRef);
                if (checkDoc.exists()) {
                    console.log("Datos de prueba ya existen. Omitiendo siembra.");
                    return;
                }
                
                console.log("Sembrando datos de prueba...");

                const initialStores = [
                    {
                        id: "ModaTrendy",
                        'nombre de la tienda': "Moda Trendy",
                        galer칤a: "El Rey",
                        piso: "2",
                        stand: "215",
                        'descripci칩n libre': "Especialistas en ropa urbana y juvenil.",
                        tiktok: "https://tiktok.com/@modatrendy",
                        likes: 15,
                        createdAt: new Date().toISOString(),
                        creatorId: 'system-seed'
                    },
                    {
                        id: "TextilSofia",
                        'nombre de la tienda': "Textil Sof칤a",
                        galer칤a: "La Rotonda",
                        piso: "5",
                        stand: "501",
                        'descripci칩n libre': "Venta de telas por mayor, variedad de colores y dise침os.",
                        tiktok: "https://tiktok.com/@textilsofia",
                        likes: 8,
                        createdAt: new Date().toISOString(),
                        creatorId: 'system-seed'
                    },
                    {
                        id: "AccesoriosCool",
                        'nombre de la tienda': "Accesorios Cool",
                        galer칤a: "Cyber Plaza",
                        piso: "1",
                        stand: "103",
                        'descripci칩n libre': "Joyas de fantas칤a, lentes y gorras de moda.",
                        tiktok: "https://tiktok.com/@accesorioscool",
                        likes: 22,
                        createdAt: new Date().toISOString(),
                        creatorId: 'system-seed'
                    },
                ];

                for (const store of initialStores) {
                    await setDoc(doc(storesColRef, store.id), store);
                }

                console.log("춰Siembra de datos completada!");

            } catch (error) {
                console.error("Error al sembrar datos de prueba:", error);
            }
        }
        
        // --- INICIAR ESCUCHADORES EN TIEMPO REAL ---
        function setupRealtimeListeners() {
            // 1. Escuchar la lista de tiendas
            setupStoreListener();
            // 2. Escuchar los likes del usuario (si est치 autenticado)
            if (currentUserId) {
                setupLikesListener();
            }
        }
        
        // --- ESCUCHADOR DE TIENDAS ---
        function setupStoreListener() {
            const storesColRef = getStoresCollectionRef();
            const q = query(storesColRef);

            onSnapshot(q, (snapshot) => {
                loadingMessage.classList.add('hidden');
                const stores = [];
                const galleries = new Set();
                
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const storeData = {
                        id: doc.id,
                        likes: data.likes || 0,
                        ...data
                    };
                    stores.push(storeData);
                    galleries.add(data.galer칤a);
                });

                stores.sort((a, b) => b.likes - a.likes); 
                populateGalleryFilter(galleries);
                
                // Pasa el estado actual de todas las tiendas y los likes al renderizador
                displayStores(stores, userLikes); 

                galleryFilter.onchange = () => displayStores(stores, userLikes);
                searchInput.oninput = () => displayStores(stores, userLikes);
            }, (error) => {
                console.error("Error en onSnapshot (Tiendas): ", error);
                loadingMessage.textContent = "Error al cargar los datos en tiempo real.";
            });
        }
        
        // --- ESCUCHADOR DE LIKES DEL USUARIO ---
        function setupLikesListener() {
            const likesColRef = getLikesCollectionRef();
            if (!likesColRef) return;
            
            // Escucha todos los documentos (likes) del usuario actual
            onSnapshot(likesColRef, (snapshot) => {
                userLikes.clear(); // Limpia el set
                snapshot.forEach(doc => {
                    userLikes.add(doc.id); // Agrega el ID de la tienda que tiene like
                });
                
                // Dispara una re-renderizaci칩n para actualizar los corazones
                // La funci칩n setupStoreListener ya llama a displayStores cuando cambia la lista de tiendas, 
                // pero si solo cambian los likes, necesitamos una llamada expl칤cita
                if (!loadingMessage.classList.contains('hidden')) {
                   // Si el mensaje de carga est치 visible, significa que displayStores a칰n no se ha llamado
                   // No hacemos nada, setupStoreListener lo har치.
                } else {
                    // Si ya se cargaron las tiendas, debemos re-renderizar para actualizar el coraz칩n.
                    // Para esto, necesitar칤amos la lista de tiendas actual. Como no la guardamos globalmente,
                    // confiaremos en que el listener de tiendas (que es la fuente principal) se dispare.
                    // Sin embargo, para mayor robustez en un entorno de desarrollo:
                    // Dejamos la instrucci칩n anterior (que usa la lista de tiendas actual en el scope del listener de tiendas)
                    // y nos aseguramos de que los filtros se apliquen correctamente.
                    console.log("Likes de usuario actualizados, esperando re-renderizado de tiendas.");
                }
                
            }, (error) => {
                console.error("Error en onSnapshot (Likes): ", error);
            });
        }

        // --- ESCRITURA (Likes) ---
        window.likeStore = async function(storeId) {
            if (!currentUserId) {
                alertUser("Necesitas estar autenticado para dar o quitar 'Me Gusta'.");
                return;
            }

            const likeDocRef = doc(getLikesCollectionRef(), storeId);
            const storeDocRef = doc(getStoresCollectionRef(), storeId);

            try {
                // 1. Verificar si el usuario ya dio like
                const likeDoc = await getDoc(likeDocRef);

                if (likeDoc.exists()) {
                    // Ya dio like: Quitar like (Dislike)
                    await deleteLike(likeDocRef, storeDocRef);
                } else {
                    // No ha dado like: A침adir like
                    await addLike(likeDocRef, storeDocRef);
                }
                
                // La UI se actualizar치 autom치ticamente gracias a los onSnapshot listeners
            } catch (error) {
                console.error("Error al gestionar el like:", error);
                alertUser("Error de conexi칩n al dar o quitar 'Me Gusta'.");
            }
        };

        async function addLike(likeDocRef, storeDocRef) {
            // Crea el documento de like en la colecci칩n privada del usuario
            await setDoc(likeDocRef, { likedAt: new Date().toISOString() });
            
            // Incrementa el contador de likes en la tienda (colecci칩n p칰blica)
            await updateDoc(storeDocRef, {
                likes: increment(1)
            });
        }

        async function deleteLike(likeDocRef, storeDocRef) {
            // Elimina el documento de like
            await deleteDoc(likeDocRef);
            
            // Decrementa el contador de likes (asegurando que no baje de 0)
            const storeSnapshot = await getDoc(storeDocRef);
            if (storeSnapshot.exists() && storeSnapshot.data().likes > 0) {
                 await updateDoc(storeDocRef, {
                    likes: increment(-1)
                });
            }
        }
        
        // --- ESCRITURA (A침adir Tienda) ---
        window.addStore = async function(e) {
            e.preventDefault();
            formMessage.classList.add('hidden');
            
            const storeName = document.getElementById('storeName').value.trim();
            
            if (!storeName) {
                displayFormMessage("El nombre de la tienda es obligatorio.", 'error');
                return;
            }

            // Datos de la nueva tienda
            const newStoreData = {
                // Usamos el nombre de la tienda como Document ID
                'nombre de la tienda': storeName,
                galer칤a: document.getElementById('gallery').value.trim(),
                piso: document.getElementById('floor').value.trim(),
                stand: document.getElementById('stand').value.trim(),
                'descripci칩n libre': document.getElementById('description').value.trim(),
                tiktok: document.getElementById('tiktok').value.trim(),
                likes: 0, // Inicializar siempre en 0
                createdAt: new Date().toISOString(),
                creatorId: currentUserId // Registrar qui칠n la agreg칩
            };
            
            const storeDocRef = doc(getStoresCollectionRef(), storeName);

            try {
                // Verificar si ya existe una tienda con ese nombre
                const existingDoc = await getDoc(storeDocRef);
                if (existingDoc.exists()) {
                    displayFormMessage(`Ya existe una tienda con el nombre "${storeName}". Usa un nombre 칰nico.`, 'error');
                    return;
                }

                // Guardar la nueva tienda usando el nombre como Document ID
                await setDoc(storeDocRef, newStoreData);

                // 칄xito
                displayFormMessage("춰Tienda registrada con 칠xito!", 'success');
                storeForm.reset();
                setTimeout(hideModal, 1500); // Cerrar despu칠s de 1.5 segundos
            } catch (error) {
                console.error("Error al a침adir la tienda:", error);
                displayFormMessage("Error al guardar la tienda. Verifica la consola.", 'error');
            }
        }
        
        // Asignar la funci칩n de env칤o al formulario
        storeForm.addEventListener('submit', window.addStore);

        // =================================================================
        // 3. FUNCIONES DE UI Y L칍GICA DE FILTRADO
        // =================================================================

        function populateGalleryFilter(galleries) {
            galleryFilter.innerHTML = '<option value="all">Todas las galer칤as</option>';
            // Convertir Set a Array, ordenar alfab칠ticamente
            const sortedGalleries = Array.from(galleries).sort();
            sortedGalleries.forEach(gallery => {
                const option = document.createElement('option');
                option.value = gallery;
                option.textContent = gallery;
                galleryFilter.appendChild(option);
            });
        }

        // La funci칩n ahora acepta el set de likes para renderizar el coraz칩n correctamente
        function displayStores(stores, likesSet) {
            const selectedGallery = galleryFilter.value;
            const searchTerm = searchInput.value.toLowerCase().trim();
            storesContainer.innerHTML = '';

            const filteredStores = stores.filter(store => {
                // Filtrar por galer칤a
                const galleryMatch = selectedGallery === 'all' || store.galer칤a === selectedGallery;

                // Filtrar por b칰squeda
                const searchMatch = store['nombre de la tienda'].toLowerCase().includes(searchTerm) ||
                                    (store['descripci칩n libre'] && store['descripci칩n libre'].toLowerCase().includes(searchTerm));

                return galleryMatch && searchMatch;
            });

            if (filteredStores.length === 0) {
                storesContainer.innerHTML = `<p class="text-center text-gray-500 col-span-full">
                                                No se encontraron tiendas que coincidan con los filtros.
                                            </p>`;
                return;
            }

            // Renderizar tarjetas de tiendas
            filteredStores.forEach(store => {
                // Determinar si el usuario actual ha dado like a esta tienda
                const isLiked = likesSet.has(store.id);
                // Clase del coraz칩n: fill-red-500 si tiene like, stroke-red-500 (borde) si no
                const heartClass = isLiked ? 'fill-red-500' : 'stroke-red-500';
                
                const card = document.createElement('div');
                card.className = 'store-card bg-white p-5 rounded-xl shadow-md border border-gray-100 hover:shadow-lg';
                card.innerHTML = `
                    <h3 class="text-xl font-bold text-blue-600 mb-2">${store['nombre de la tienda']}</h3>
                    <p class="text-sm text-gray-700 mb-3">${store['descripci칩n libre']}</p>
                    <div class="grid grid-cols-2 gap-x-4 gap-y-2 text-sm mb-4 border-t pt-3">
                        <p><strong>Galer칤a:</strong> ${store.galer칤a}</p>
                        <p><strong>Piso:</strong> ${store.piso}</p>
                        <p><strong>Stand:</strong> ${store.stand}</p>
                        <a href="${store.tiktok}" target="_blank" class="text-pink-500 hover:text-pink-600 font-medium truncate">
                            <i data-lucide="tiktok" class="inline w-4 h-4 mr-1"></i>TikTok
                        </a>
                    </div>
                    <div class="flex justify-between items-center pt-3 border-t">
                        <button onclick="likeStore('${store.id}')" 
                                class="flex items-center text-red-500 hover:text-red-700 transition duration-150">
                            <i data-lucide="heart" class="w-5 h-5 mr-1 ${heartClass}"></i>
                            <span class="font-bold">${store.likes}</span> Likes
                        </button>
                        <p class="text-xs text-gray-400">ID: ${store.id.substring(0, 10)}...</p>
                    </div>
                `;
                storesContainer.appendChild(card);
            });
            // Reemplazar 칤conos de lucide despu칠s de renderizar
            lucide.createIcons();
        }

        function alertUser(message) {
            // Implementaci칩n de mensaje en lugar de alert()
            const existingAlert = document.getElementById('customAlert');
            if (existingAlert) existingAlert.remove();
            
            const alertDiv = document.createElement('div');
            alertDiv.id = 'customAlert';
            alertDiv.className = 'fixed top-4 right-4 bg-red-500 text-white p-4 rounded-lg shadow-xl z-[9999]';
            alertDiv.textContent = message;
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }

        function displayFormMessage(message, type) {
            formMessage.textContent = message;
            formMessage.classList.remove('hidden', 'bg-red-100', 'text-red-700', 'bg-green-100', 'text-green-700');
            if (type === 'error') {
                formMessage.classList.add('bg-red-100', 'text-red-700');
            } else if (type === 'success') {
                formMessage.classList.add('bg-green-100', 'text-green-700');
            }
        }
        
        // =================================================================
        // 4. FUNCIONES DEL MODAL
        // =================================================================
        
        window.showModal = function() {
            const modal = document.getElementById('addStoreModal');
            modal.classList.remove('hidden');
            // Inicializar 칤conos dentro del modal
            lucide.createIcons();
        }

        window.hideModal = function() {
            const modal = document.getElementById('addStoreModal');
            modal.classList.add('hidden');
            formMessage.classList.add('hidden');
            storeForm.reset();
        }

        // Cerrar modal al hacer clic fuera
        document.getElementById('addStoreModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('addStoreModal')) {
                window.hideModal();
            }
        });
        
    </script>
</body>
</html>
